<!DOCTYPE html>
{% load i18n %}
{% load static %}
<html>
<head>
	<meta charset="utf-8">
	<title>{% trans 'New Property' %}</title>
	<!-- Mobile Specific Metas -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<!-- Main Style Css -->
	<link rel="stylesheet" href="{% static 'css/forms/style.css' %}"/>
</head>
<body>
	<div class="page-content" style="background-image: url('images/wizard-v3.jpg')">
<!--		<div class="wizard-v3-content">-->
<!--			<div class="wizard-form">-->
			                <div class="inner">
			                	<div class="form-row">
									<div class="form-holder form-holder-2">
										<label class="form-row-inner">
											<input type="text" class="form-control" id="cvc2" name="cvc3" required>
											<span class="label">{{form.name.label}}</span>
					  						<span class="border"></span>
										</label>
									</div>
								</div>
							</div>
	</div>
	<script src="{% static 'js/forms/jquery-3.3.1.min.js' %}"></script>
	<!-- Compiled and minified JavaScript -->
	<script>
		$(document).ready(function(){

			$("input,select").addClass('form-control');

			$("#id_date_start,#id_date_complete").focus( function () {
				this.type='date';
			});

			$("#id_date_start,#id_date_complete").blur( function () {
				this.type='text';
			});

			$("#id_facilities").attr('class','js-select-multiple form-control');

			$("#id_properties").attr('class','js-select-multiple form-control');
			$("#id_properties").attr('multiple','multiple');
			$('#id_properties').val(null).trigger('change');

			$('.js-select-multiple').select2();

			// Change image when photo is uploaded
			document.getElementById('id_photo').addEventListener('change', handleFileSelect, false);
			document.getElementById('id_photo2').addEventListener('change', handleFileSelect, false);
			document.getElementById('id_photo3').addEventListener('change', handleFileSelect, false);
		});

		function handleFileSelect(event) {
      		alert("got into function")
          	var files = event.target.files; // FileList object
          	// Loop through the FileList and render image files as thumbnails
          	for (var i = 0, f; f = files[i]; i++) {
              	// Only process image files
              	if (!f.type.match('image.*')) continue;
              	// Init FileReader()
              	// See: https://developer.mozilla.org/en-US/docs/Web/API/FileReader
              	var reader = new FileReader();
              	// Closure to capture the file information
              	reader.onload = (function () {
                  	return function (e) {
                  		let newImage = '<div class="column2" style="background-image:url('+e.target.result+')"\
											 title="'+e.target.result+'" onclick="myFunction(this);">\
											<i class="zmdi zmdi-aspect-ratio-alt zmdi-hc-2x"></i>\
										</div>'
						let imageDiv = document.
						getElementById('imageDiv');
						imageDiv.innerHTML += newImage;
                  	};
              })(f);
              // Read in the image file as a data URL
              reader.readAsDataURL(f);
			}
		}


		function loopImageFields(){
			$("#imageFields input[type=file]").each(function () {
				if (!$(this).val()){
					$(this).trigger('click');
				}
			});
		}


		function myFunction(imgs) {
		  	// Get the expanded image
		  	var expandImg = document.getElementById("expandedImg");
		  	// Get the image text
		  	var imgText = document.getElementById("imgtext");
		  	// Use the same src in the expanded image as the image being clicked on from the grid
		  	expandImg.src = imgs.title;
		 	 // Use the value of the alt attribute of the clickable image as text inside the expanded image
		 	 //imgText.innerHTML = imgs.title;
		  	// Show the container element (hidden with CSS)
		  	expandImg.parentElement.style.display = "block";
		  	expandImg.scrollIntoView()
		}
	</script>
</body>
</html>
