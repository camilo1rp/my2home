<!DOCTYPE html>
{% load i18n %}
{% load static %}
<html>
<head>
	<meta charset="utf-8">
	<title>{% trans 'New Property' %}</title>
	<!-- Mobile Specific Metas -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<!-- Compiled and minified CSS -->
	<!-- Font-->
	<link rel="stylesheet" type="text/css" href="{% static 'css/roboto-font.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'fonts/material-design-iconic-font/css/material-design-iconic-font.min.css' %}">
	<!-- datepicker -->
	<link rel="stylesheet" type="text/css" href="{% static 'css/forms/jquery-ui.min.css' %}">

	<!-- Main Style Css -->
	<link rel="stylesheet" href="{% static 'css/forms/style.css' %}"/>
	<!-- select 2-->
	<link href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" rel="stylesheet" />

<!--	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">-->

</head>
<body>
	<div class="page-content" style="background-image: url('images/wizard-v3.jpg')">
		<div class="wizard-v3-content">
			<div class="wizard-form">
				<div class="wizard-header">
					<h3 class="heading">{% trans 'New Project' %}</h3>
					<p>{% trans 'Fill all form field to go next step' %}</p>
				</div>
		        <form class="form-register" enctype="multipart/form-data" method="post">{% csrf_token %}
		        	<div id="form-total">
		        		<!-- SECTION 1 -->
			            <h2>
			            	<span class="step-icon"><i class="zmdi zmdi-account"></i></span>
			            	<span class="step-text">{% trans 'Step 1'%}</span>
			            </h2>
			            <section>
			                <div class="inner">
			                	<h3>{% trans 'Project Information' %}</h3>
			                	<div class="form-row">
									<div class="form-holder form-holder-2">
										<label class="form-row-inner">
											{{form.name}}
											<span class="label">{{form.name.label}}</span>
					  						<span class="border"></span>
										</label>
									</div>
								</div>
								<div class="form-row">
									<div class="form-holder">
										<label class="form-row-inner">
											{{form.date_start}}
											<span class="label">{{form.date_start.label}}</span>
					  						<span class="border"></span>
										</label>
									</div>
									<div class="form-holder">
										<label class="form-row-inner">
											{{form.date_complete}}
											<span class="label">{{form.date_complete.label}}</span>
											<span class="border"></span>
										</label>
									</div>
								</div>
								<div class="form-row">
									<div class="form-holder form-holder-2">
										<label class="form-row-inner">
											{{form.name}}
											<span class="label">{{form.name.label}}</span>
											<span class="border"></span>
										</label>
									</div>
								</div>
							</div>
			            </section>
						<!-- SECTION 2 -->
			            <h2>
			            	<span class="step-icon"><i class="zmdi zmdi-lock"></i></span>
			            	<span class="step-text">{%trans 'Step 2' %}</span>
			            </h2>
			            <section>
			                <div class="inner">
			                	<h4>{% trans 'Facilities' %}</h4>
			                	<div class="form-row">
									<div class="form-holder form-holder-2">
										<label class="form-row-inner">
											{{form.facilities}}
											<span class="label2"></span>
					  						<span class="border"></span>
										</label>
									</div>
								</div>
								<h4>{% trans 'Properties' %}</h4>
								<div class="form-row">
									<div class="form-holder form-holder-2">
										<label class="form-row-inner">
											{{form.properties}}
											<span class="label2"></span>
					  						<span class="border"></span>
										</label>
									</div>
								</div>
							</div>
			            </section>
			            <!-- SECTION 3 -->
			            <h2>
			            	<span class="step-icon"><i class="zmdi zmdi-card"></i></span>
			            	<span class="step-text">{% trans 'Step 3'%}</span>
			            </h2>
			            <section>
							<div>
								<div id="imageFields" hidden>
<!--									inputs hidden-->
									{{form.photo}}
									{{form.photo2}}
									{{form.photo3}}
								</div>
			                	<h3>{% trans 'Project images' %}</h3>
								<button onclick="loopImageFields()">hello</button>
									<!-- The grid: four columns -->
									<div class="row2" id="imageDiv">
										<div class="column2" style="background-image:url('{% static 'images/person_1.jpg' %}')"
											 title="{% static 'images/person_1.jpg' %}" onclick="myFunction(this);">
											<i class="zmdi zmdi-aspect-ratio-alt zmdi-hc-2x"></i>
										</div>
										<div class="column2" style="background-image:url('{% static 'images/img_1.jpg' %}')"
											 title="{% static 'images/img_1.jpg' %}" onclick="myFunction(this);">
										</div>
										<div class="column2" style="background-image:url('{% static 'images/img_2.jpg' %}')"
											 title="{% static 'images/img_2.jpg' %}" onclick="myFunction(this);">
										</div>
										<div class="column2" style="background-image:url('{% static 'images/img_1.jpg' %}')"
											 title="{% static 'images/img_1.jpg' %}" onclick="myFunction(this);">
										</div>
										<div class="column2" style="background-image:url('{% static 'images/img_1.jpg' %}')"
											 title="{% static 'images/img_1.jpg' %}" onclick="myFunction(this);">
										</div>
										<div class="column2" style="background-image:url('{% static 'images/img_1.jpg' %}')"
											 title="{% static 'images/img_1.jpg' %}" onclick="myFunction(this);">
										</div>
									</div>

									<!-- The expanding image container -->
									<div class="container2">
										<!-- Close the image -->
										<span onclick="this.parentElement.style.display='none'" class="closebtn">&times;</span>

										<!-- Expanded image -->
										<img id="expandedImg" src="" style="width:100%">

										<!-- Image text -->
										<div id="imgtext"></div>
									</div>
							</div>

<!--			                	<div class="form-row">-->
<!--			                		<div class="form-holder form-holder-2">-->
<!--			                			<input type="radio" name="radio1" id="pay-1" value="pay-1" checked>-->
<!--			                			<label class="pay-1-label" for="pay-1"><img src="images/wizard_v3_icon_1.png" alt="pay-1">Credit Card</label>-->
<!--										<input type="radio" name="radio1" id="pay-2" value="pay-2">-->
<!--										<label class="pay-2-label" for="pay-2"><img src="images/wizard_v3_icon_2.png" alt="pay-2">Paypal</label>-->
<!--			                		</div>-->
<!--			                	</div>-->
<!--			                	<div class="form-row">-->
<!--									<div class="form-holder form-holder-2">-->
<!--										<label class="form-row-inner">-->
<!--											<input type="text" class="form-control" id="holder" name="holder" required>-->
<!--											<span class="label">Holder Name*</span>-->
<!--					  						<span class="border"></span>-->
<!--										</label>-->
<!--									</div>-->
<!--								</div>-->
<!--			                	<div class="form-row">-->
<!--									<div class="form-holder">-->
<!--										<label class="form-row-inner">-->
<!--											<input type="text" class="form-control" id="card" name="card" required>-->
<!--											<span class="label">Card Number*</span>-->
<!--											<span class="border"></span>-->
<!--										</label>-->
<!--									</div>-->
<!--									<div class="form-holder">-->
<!--										<label class="form-row-inner">-->
<!--											<input type="text" class="form-control" id="cvc" name="cvc" required>-->
<!--											<span class="label">CVC*</span>-->
<!--											<span class="border"></span>-->
<!--										</label>-->
<!--									</div>-->
<!--								</div>-->
<!--			                	<div class="form-row form-row-date form-row-date-1">-->
<!--									<div class="form-holder form-holder-2">-->
<!--										<label for="date" class="special-label">Expiry Date*:</label>-->
<!--										<select name="month_1" id="month_1">-->
<!--											<option value="Month" disabled selected>Month</option>-->
<!--											<option value="Feb">Feb</option>-->
<!--											<option value="Mar">Mar</option>-->
<!--											<option value="Apr">Apr</option>-->
<!--											<option value="May">May</option>-->
<!--										</select>-->
<!--										<select name="year_1" id="year_1">-->
<!--											<option value="Year" disabled selected>Year</option>-->
<!--											<option value="2017">2017</option>-->
<!--											<option value="2016">2016</option>-->
<!--											<option value="2015">2015</option>-->
<!--											<option value="2014">2014</option>-->
<!--											<option value="2013">2013</option>-->
<!--										</select>-->
<!--									</div>-->
<!--								</div>-->
<!--							</div>-->
			            </section>
			            <!-- SECTION 4 -->
			            <h2>
			            	<span class="step-icon"><i class="zmdi zmdi-receipt"></i></span>
			            	<span class="step-text">Confirm</span>
			            </h2>
			            <section>
			                <div class="inner">
			                	<h3>Confirm Details:</h3>
			                	<div class="form-row table-responsive">
									<table class="table">
										<tbody>
											<tr class="space-row">
												<th>Full Name:</th>
												<td id="fullname-val"></td>
											</tr>
											<tr class="space-row">
												<th>Email Address:</th>
												<td id="email-val"></td>
											</tr>
											<tr class="space-row">
												<th>Phone Number:</th>
												<td id="phone-val"></td>
											</tr>
											<tr class="space-row">
												<th>User:</th>
												<td id="username-val"></td>
											</tr>
											<tr class="space-row">
												<th>Gender:</th>
												<td id="gender-val"></td>
											</tr>
											<tr class="space-row">
												<th>Address:</th>
												<td id="address-val"></td>
											</tr>
											<tr class="space-row">
												<th>Card Type:</th>
												<td id="pay-val">Credit Card</td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
			            </section>
		        	</div>
		        </form>
			</div>
		</div>
	</div>
	<script src="{% static 'js/forms/jquery-3.3.1.min.js' %}"></script>
	<script src="{% static 'js/forms/jquery.steps.js' %}"></script>
	<script src="{% static 'js/forms/jquery-ui.min.js' %}"></script>
	<script src="{% static 'js/forms/main.js' %}"></script>
<!--	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>-->
	<script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>
	<!-- Compiled and minified JavaScript -->
	<script>
		$(document).ready(function(){

			$("input,select").addClass('form-control');

			$("#id_date_start,#id_date_complete").focus( function () {
				this.type='date';
			});

			$("#id_date_start,#id_date_complete").blur( function () {
				this.type='text';
			});

			$("#id_facilities").attr('class','js-select-multiple form-control');

			$("#id_properties").attr('class','js-select-multiple form-control');
			$("#id_properties").attr('multiple','multiple');
			$('#id_properties').val(null).trigger('change');

			$('.js-select-multiple').select2();

			// Change image when photo is uploaded
			document.getElementById('id_photo').addEventListener('change', handleFileSelect, false);
			document.getElementById('id_photo2').addEventListener('change', handleFileSelect, false);
			document.getElementById('id_photo3').addEventListener('change', handleFileSelect, false);
		});

		function handleFileSelect(event) {
      		alert("got into function")
          	var files = event.target.files; // FileList object
          	// Loop through the FileList and render image files as thumbnails
          	for (var i = 0, f; f = files[i]; i++) {
              	// Only process image files
              	if (!f.type.match('image.*')) continue;
              	// Init FileReader()
              	// See: https://developer.mozilla.org/en-US/docs/Web/API/FileReader
              	var reader = new FileReader();
              	// Closure to capture the file information
              	reader.onload = (function () {
                  	return function (e) {
                  		let newImage = '<div class="column2" style="background-image:url('+e.target.result+')"\
											 title="'+e.target.result+'" onclick="myFunction(this);">\
											<i class="zmdi zmdi-aspect-ratio-alt zmdi-hc-2x"></i>\
										</div>'
						let imageDiv = document.
						getElementById('imageDiv');
						imageDiv.innerHTML += newImage;
                  	};
              })(f);
              // Read in the image file as a data URL
              reader.readAsDataURL(f);
			}
		}


		function loopImageFields(){
			$("#imageFields input[type=file]").each(function () {
				if (!$(this).val()){
					$(this).trigger('click');
				}
			});
		}


		function myFunction(imgs) {
		  	// Get the expanded image
		  	var expandImg = document.getElementById("expandedImg");
		  	// Get the image text
		  	var imgText = document.getElementById("imgtext");
		  	// Use the same src in the expanded image as the image being clicked on from the grid
		  	expandImg.src = imgs.title;
		 	 // Use the value of the alt attribute of the clickable image as text inside the expanded image
		 	 //imgText.innerHTML = imgs.title;
		  	// Show the container element (hidden with CSS)
		  	expandImg.parentElement.style.display = "block";
		  	expandImg.scrollIntoView()
		}
	</script>
</body>
</html>
